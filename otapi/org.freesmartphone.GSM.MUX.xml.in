<?xml version="1.0"?>
<!DOCTYPE node PUBLIC "-//freedesktop//DTD D-BUS Object Introspection 1.0//EN" "http://www.freedesktop.org/standards/dbus/1.0/introspect.dtd">

<node name="/" xmlns:doc="http://www.freedesktop.org/dbus/1.0/doc.dtd" doc:id="freesmartphone-gsm-mux-interface">
<doc:doc>
  <doc:summary>freesmartphone.org GSM MUX Interface</doc:summary>
  <doc:version>0.9.0</doc:version>
</doc:doc>
<interface name="org.freesmartphone.GSM.MUX">

  <doc:doc>
    <doc:para>
      The MUX interface is used to request virtual serial channels
      (implemented through pseudo TTYs) which are multiplexed to one serial
      line as described in 3GPP TS 07.10. It also allows to control modem
      power and reset handling.
    </doc:para>
  </doc:doc>

  <error name="NoChannel">
    <doc:doc>
      <doc:description>
        Raised, when the device can't allocate a new channel.
      </doc:description>
    </doc:doc>
  </error>

    <!-- switch modem on/off -->
    <method name="SetPower">
      <annotation name="org.freedesktop.DBus.GLib.CSymbol" value="muxer_control_power"/>
      <doc:doc>
        <doc:description>Set modem power.</doc:description>
      </doc:doc>
      <arg name="origin" type="s" direction="in">
      </arg>
      <arg name="on" type="b" direction="in">
      <doc:doc>
        <doc:summary>True, to turn power on. False, otherwise.</doc:summary>
      </doc:doc>
      </arg>
    </method>

    <method name="GetPower">
      <annotation name="org.freedesktop.DBus.GLib.CSymbol" value="muxer_control_power"/>
      <doc:doc>
        <doc:description>Retrieve modem power status.</doc:description>
      </doc:doc>
      <arg name="origin" type="s" direction="in">
      </arg>
      <arg name="on" type="b" direction="out">
      <doc:doc>
        <doc:summary>True, if the modem is powered on. False, otherwise.</doc:summary>
      </doc:doc>
      </arg>
    </method>

    <method name="Reset">
      <annotation name="org.freedesktop.DBus.GLib.CSymbol" value="muxer_control_reset_modem"/>
      <doc:doc>
        <doc:description>Reset the modem.</doc:description>
      </doc:doc>
      <arg name="origin" type="s" direction="in">
      </arg>
    </method>

    <!-- allocate a muxed channel -->
    <method name="AllocChannel">
      <annotation name="org.freedesktop.DBus.GLib.CSymbol" value="muxer_control_alloc_channel"/>
      <doc:doc>
        <doc:description>
          Allocate a new virtual channel. Raises org.freesmartphone.GSM.MUX.NoChannel,
          if the channel can not be allocated.
        </doc:description>
      </doc:doc>
      <arg name="origin" type="s" direction="in">
      <doc:doc>
        <doc:summary>
          Identifies the channel user. Solely for logging.
        </doc:summary>
      </doc:doc>
      </arg>
      <arg name="channel" type="s" direction="out">
      <doc:doc>
        <doc:summary>UNIX path to the pseudo serial device.</doc:summary>
      </doc:doc>
      </arg>
    </method>
</interface>
</node>

